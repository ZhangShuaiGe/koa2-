{{extend "./layout/layout.html"}}

{{block "title"}}首页{{/block}}

{{block "css"}}{{/block}}

{{block "content"}}

<div class="layui-container">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md9">

            <div class="fly-panel" style="margin-bottom: 0;">

                <div class="fly-panel-title fly-filter js-calss">
                    <a href="/" {{if !type}} class="layui-this" {{/if}}>综合</a>
                    <span class="fly-mid"></span>
                    <a href="?type=html" {{if type == 'html'}} class="layui-this" {{/if}}>html</a>
                    <span class="fly-mid"></span>
                    <a href="?type=js" {{if type == 'js'}} class="layui-this" {{/if}}>js</a>
                    <span class="fly-mid"></span>
                    <a href="?type=es6" {{if type == 'es6'}} class="layui-this" {{/if}}>es6</a>
                    <span class="fly-filter-right layui-hide-xs">
                        <a href="" class="layui-this">按最新</a>
                    <span class="fly-mid"></span>
                        <a href="">按阅读</a>
                    </span>
                    <input type="hidden" class="js-type" value="{{type}}">
                </div>
                <ul class="fly-list">
                    {{each data}}
                        <li>
                            <h2>
                                <a class="layui-badge">{{$value.type}}</a>
                                <a href="/articleDetail?id={{$value.id}}">{{$value.title}}</a>
                            </h2>
                            <div class="fly-list-info">
                                <span>{{$value.createdAt}}</span>
                                <span class="fly-list-nums">
                                    <i class="iconfont icon-pinglun1" title="阅读"></i> 66
                                </span>
                            </div>
                        </li>
                    {{/each}}
                    <div style="text-align: center" id="pages"></div>
                </ul>
            </div>
        </div>
        <div class="layui-col-md3">

            <div class="fly-panel">
                <h3 class="fly-panel-title">温馨通道</h3>
                <ul class="fly-panel-main fly-list-static">
                    <li>
                        <a href="http://fly.layui.com/jie/4281/" target="_blank">layui 的 GitHub 及 Gitee (码云)
                            仓库，欢迎Star</a>
                    </li>
                    <li>
                        <a href="http://fly.layui.com/jie/5366/" target="_blank">
                            layui 常见问题的处理和实用干货集锦
                        </a>
                    </li>
                    <li>
                        <a href="http://fly.layui.com/jie/4281/" target="_blank">layui 的 GitHub 及 Gitee (码云)
                            仓库，欢迎Star</a>
                    </li>
                    <li>
                        <a href="http://fly.layui.com/jie/5366/" target="_blank">
                            layui 常见问题的处理和实用干货集锦
                        </a>
                    </li>
                    <li>
                        <a href="http://fly.layui.com/jie/4281/" target="_blank">layui 的 GitHub 及 Gitee (码云)
                            仓库，欢迎Star</a>
                    </li>
                </ul>
            </div>

            <div class="fly-panel fly-link">
                <h3 class="fly-panel-title">友情链接</h3>
                <dl class="fly-panel-main">
                    <dd><a href="http://www.layui.com/" target="_blank">layui</a>
                    <dd>
                    <dd><a href="http://layim.layui.com/" target="_blank">WebIM</a>
                    <dd>
                    <dd><a href="http://layer.layui.com/" target="_blank">layer</a>
                    <dd>
                    <dd><a href="http://www.layui.com/laydate/" target="_blank">layDate</a>
                    <dd>
                    <dd>
                        <a href="mailto:xianxin@layui-inc.com?subject=%E7%94%B3%E8%AF%B7Fly%E7%A4%BE%E5%8C%BA%E5%8F%8B%E9%93%BE"
                           class="fly-link">申请友链</a>
                    <dd>
                </dl>
            </div>

            <dl class="fly-panel fly-list-one">
                <dt class="fly-panel-title">本周热议</dt>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>
                <dd>
                    <a href="jie/detail.html">基于 layui 的极简社区页面模版</a>
                    <span><i class="iconfont icon-pinglun1"></i> 16</span>
                </dd>

                <!-- 无数据时 -->
                <!--
                <div class="fly-none">没有相关数据</div>
                -->
            </dl>

        </div>
    </div>
</div>
{{/block}}

{{block "js"}}
<script>
    //获取地址栏参数，name:参数名称
    function getUrlParms(name){
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if(r!=null)
            return unescape(r[2]);
        return null;
    }
    var currpage = getUrlParms("page");

    //调用分页
    layui.use('laypage', function(){
        var laypage = layui.laypage;
        laypage.render({
            elem: 'pages', //注意，这里的 test1 是 ID，不用加 # 号
            count: {{count}}, //数据总数，从服务端得到
            limit:15, //每页多少条数据
            curr: currpage, // 当前页
            jump:function (obj, first) {
                //首次不执行
                if(!first){
                    window.location.href="?page=" + obj.curr;
                }
            }
        });
    });

    //分页为0 隐藏分页
    if(Number({{count}}) < 15){
        $("#pages").hide();
    }

</script>
{{/block}}